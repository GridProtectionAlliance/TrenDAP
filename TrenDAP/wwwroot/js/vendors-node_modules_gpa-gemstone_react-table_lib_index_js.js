(self["webpackChunktrendap"] = self["webpackChunktrendap"] || []).push([["vendors-node_modules_gpa-gemstone_react-table_lib_index_js"],{

/***/ "./node_modules/@gpa-gemstone/react-table/lib/DynamicTable.js":
/*!********************************************************************!*\
  !*** ./node_modules/@gpa-gemstone/react-table/lib/DynamicTable.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

// ******************************************************************************************************
//  DynamicTable.tsx - Gbtc
//
//  Copyright © 2021, Grid Protection Alliance.  All Rights Reserved.
//
//  Licensed to the Grid Protection Alliance (GPA) under one or more contributor license agreements. See
//  the NOTICE file distributed with this work for additional information regarding copyright ownership.
//  The GPA licenses this file to you under the MIT License (MIT), the "License"; you may not use this
//  file except in compliance with the License. You may obtain a copy of the License at:
//
//      http://opensource.org/licenses/MIT
//
//  Unless agreed to in writing, the subject software distributed under the License is distributed on an
//  "AS-IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. Refer to the
//  License for the specific language governing permissions and limitations.
//
//  Code Modification History:
//  ----------------------------------------------------------------------------------------------------
//  07/26/2021 - Billy Ernest
//       Generated original version of source code.
//
// ******************************************************************************************************
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DynamicTable = void 0;
var React = __webpack_require__(/*! react */ "./node_modules/react/index.js");
var Table_1 = __webpack_require__(/*! ./Table */ "./node_modules/@gpa-gemstone/react-table/lib/Table.js");
function DynamicTable(props) {
    if (props.data.length <= 0)
        return null;
    var cols = [];
    var keys = Object.keys(props.data[0]);
    for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {
        var key = keys_1[_i];
        cols.push({ key: key, label: key, field: key });
    }
    return (React.createElement("table", { className: props.tableClass !== undefined ? props.tableClass : '', style: props.tableStyle },
        React.createElement(Table_1.Header, { Class: props.theadClass, Style: props.theadStyle, Cols: cols, SortKey: props.sortKey, Ascending: props.ascending, Click: function (d, e) { return handleSort(d, e); } }),
        React.createElement(Table_1.Rows, { Data: props.data, Cols: cols, RowStyle: props.rowStyle, BodyStyle: props.tbodyStyle, BodyClass: props.tbodyClass, Click: function (data, e) { return props.onClick(data, e); }, Selected: props.selected, KeySelector: props.keySelector })));
    function handleSort(data, event) {
        if (data.colKey !== null)
            props.onSort(data);
    }
}
exports.DynamicTable = DynamicTable;


/***/ }),

/***/ "./node_modules/@gpa-gemstone/react-table/lib/SearchableTable.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@gpa-gemstone/react-table/lib/SearchableTable.js ***!
  \***********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";

// ******************************************************************************************************
//  SearchableTable.tsx - Gbtc
//
//  Copyright © 2021, Grid Protection Alliance.  All Rights Reserved.
//
//  Licensed to the Grid Protection Alliance (GPA) under one or more contributor license agreements. See
//  the NOTICE file distributed with this work for additional information regarding copyright ownership.
//  The GPA licenses this file to you under the MIT License (MIT), the "License"; you may not use this
//  file except in compliance with the License. You may obtain a copy of the License at:
//
//      http://opensource.org/licenses/MIT
//
//  Unless agreed to in writing, the subject software distributed under the License is distributed on an
//  "AS-IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. Refer to the
//  License for the specific language governing permissions and limitations.
//
//  Code Modification History:
//  ----------------------------------------------------------------------------------------------------
//  07/12/2021 - C. Lackner
//       Generated original version of source code.
//
// ******************************************************************************************************
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.SearchableTable = void 0;
var React = __webpack_require__(/*! react */ "./node_modules/react/index.js");
var Table_1 = __webpack_require__(/*! ./Table */ "./node_modules/@gpa-gemstone/react-table/lib/Table.js");
/**
 * A Table with an input Field to search on top
 */
function SearchableTable(props) {
    var _a = React.useState(props.data), data = _a[0], setData = _a[1];
    var _b = React.useState(''), searchTextAS = _b[0], setSearchTextAS = _b[1];
    React.useEffect(function () {
        setData(props.data.filter(function (s) { return props.matchSearch(s, searchTextAS); }));
    }, [props.data, searchTextAS]);
    return React.createElement(React.Fragment, null,
        React.createElement("input", { className: "form-control", placeholder: "Search filter for select box ...", value: searchTextAS, onChange: function (e) { return setSearchTextAS(e.target.value); } }),
        React.createElement(Table_1.default, __assign({}, props, { data: data })));
}
exports.SearchableTable = SearchableTable;


/***/ }),

/***/ "./node_modules/@gpa-gemstone/react-table/lib/SelectTable.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@gpa-gemstone/react-table/lib/SelectTable.js ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";

// ******************************************************************************************************
//  SelectTable.tsx - Gbtc
//
//  Copyright © 2021, Grid Protection Alliance.  All Rights Reserved.
//
//  Licensed to the Grid Protection Alliance (GPA) under one or more contributor license agreements. See
//  the NOTICE file distributed with this work for additional information regarding copyright ownership.
//  The GPA licenses this file to you under the MIT License (MIT), the "License"; you may not use this
//  file except in compliance with the License. You may obtain a copy of the License at:
//
//      http://opensource.org/licenses/MIT
//
//  Unless agreed to in writing, the subject software distributed under the License is distributed on an
//  "AS-IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. Refer to the
//  License for the specific language governing permissions and limitations.
//
//  Code Modification History:
//  ----------------------------------------------------------------------------------------------------
//  01/22/2021 - C. Lackner
//       Generated original version of source code.
//
// ******************************************************************************************************
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __spreadArray = (this && this.__spreadArray) || function (to, from) {
    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)
        to[j] = from[i];
    return to;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.SelectTable = void 0;
var React = __webpack_require__(/*! react */ "./node_modules/react/index.js");
var _ = __webpack_require__(/*! lodash */ "./node_modules/lodash/lodash.js");
var Table_1 = __webpack_require__(/*! ./Table */ "./node_modules/@gpa-gemstone/react-table/lib/Table.js");
function SelectTable(props) {
    var didMountRef = React.useRef(false);
    var _a = React.useState(props.data), data = _a[0], setData = _a[1];
    var _b = React.useState([]), selected = _b[0], setSelected = _b[1];
    var _c = React.useState(props.sortKey), sortKey = _c[0], setSortKey = _c[1];
    var _d = React.useState(props.ascending), ascending = _d[0], setAscending = _d[1];
    React.useEffect(function () {
        if (didMountRef.current)
            selectAll();
        else
            didMountRef.current = true;
    }, [props.selectAllCounter]);
    React.useEffect(function () {
        if (props.data.length !== data.length)
            setData(props.data);
    }, [props.data]);
    React.useEffect(function () {
        setSelected(function (d) { return d.filter(function (keyItem) { return data.findIndex(function (item) { return item[props.KeyField] === keyItem; }) > -1; }); });
    }, [data]);
    React.useEffect(function () {
        var sortColumn = props.cols.filter(function (col) { return col.key === sortKey; })[0];
        if (sortColumn === undefined || sortColumn.field === undefined)
            return;
        var sortField = sortColumn.field;
        setData(function (lst) { return (_.orderBy(lst, [sortField], [(ascending ? "asc" : "desc")])); });
    }, [ascending, sortKey]);
    React.useEffect(function () {
        props.onSelection(data.filter(function (item) { return selected.findIndex(function (key) { return key === item[props.KeyField]; }) > -1; }));
    }, [selected]);
    function handleClick(d, event) {
        var sIndex = selected.findIndex(function (item) { return item === d.row[props.KeyField]; });
        if (sIndex === -1)
            setSelected(function (od) { return __spreadArray(__spreadArray([], od), [d.row[props.KeyField]]); });
        else
            setSelected(function (od) { return od.filter(function (item) { return item !== d.row[props.KeyField]; }); });
    }
    function selectAll() {
        setSelected(function (d) { if (d.length === data.length)
            return [];
        else
            return data.map(function (row) { return row[props.KeyField]; }); });
    }
    function handleSort(d) {
        if (d.colKey === sortKey)
            setAscending(!ascending);
        else
            setSortKey(d.colKey);
    }
    var tableProps = {
        cols: __spreadArray([
            { key: 'gemstone-checkbox', field: props.KeyField, label: '', headerStyle: { width: '4em' }, rowStyle: { width: '4em' }, content: function (item, key, field, style) {
                    var index = selected.findIndex(function (i) { return i === item[props.KeyField]; });
                    if (index > -1)
                        return React.createElement("div", { style: { marginTop: '16px', textAlign: 'center' } },
                            React.createElement("i", { className: "fa fa-check-square-o fa-3x" }));
                    return null;
                } }
        ], props.cols),
        data: data,
        onClick: handleClick,
        sortKey: sortKey,
        ascending: ascending,
        onSort: handleSort,
        tableClass: props.tableClass,
        tableStyle: props.tableStyle,
        theadStyle: props.theadStyle,
        theadClass: props.theadClass,
        tbodyStyle: props.tbodyStyle,
        tbodyClass: props.tbodyClass,
        selected: function (d) { return false; },
        rowStyle: props.rowStyle
    };
    return React.createElement(Table_1.default, __assign({}, tableProps));
}
exports.SelectTable = SelectTable;


/***/ }),

/***/ "./node_modules/@gpa-gemstone/react-table/lib/Table.js":
/*!*************************************************************!*\
  !*** ./node_modules/@gpa-gemstone/react-table/lib/Table.js ***!
  \*************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";

//  ******************************************************************************************************
//  Table.tsx - Gbtc
//
//  Copyright © 2018, Grid Protection Alliance.  All Rights Reserved.
//
//  Licensed to the Grid Protection Alliance (GPA) under one or more contributor license agreements. See
//  the NOTICE file distributed with this work for additional information regarding copyright ownership.
//  The GPA licenses this file to you under the MIT License (MIT), the "License"; you may not use this
//  file except in compliance with the License. You may obtain a copy of the License at:
//
//      http://opensource.org/licenses/MIT
//
//  Unless agreed to in writing, the subject software distributed under the License is distributed on an
//  "AS-IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. Refer to the
//  License for the specific language governing permissions and limitations.
//
//  Code Modification History:
//  ----------------------------------------------------------------------------------------------------
//  08/02/2018 - Billy Ernest
//       Generated original version of source code.
//
//  ******************************************************************************************************
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Header = exports.Rows = void 0;
var React = __webpack_require__(/*! react */ "./node_modules/react/index.js");
function Table(props) {
    return (React.createElement("table", { className: props.tableClass !== undefined ? props.tableClass : '', style: props.tableStyle },
        React.createElement(Header, { Class: props.theadClass, Style: props.theadStyle, Cols: props.cols, SortKey: props.sortKey, Ascending: props.ascending, Click: function (d, e) { return handleSort(d, e); } }),
        React.createElement(Rows, { Data: props.data, Cols: props.cols, RowStyle: props.rowStyle, BodyStyle: props.tbodyStyle, BodyClass: props.tbodyClass, Click: function (data, e) { return props.onClick(data, e); }, Selected: props.selected, KeySelector: props.keySelector })));
    function handleSort(data, event) {
        if (data.colKey !== null)
            props.onSort(data);
    }
}
exports.default = Table;
function Rows(props) {
    if (props.Data.length === 0)
        return null;
    var rows = props.Data.map(function (item, rowIndex) {
        var cells = props.Cols.map(function (colData) {
            return React.createElement(Cell, { key: colData.key, Style: colData.rowStyle, DataKey: colData.key, DataField: colData.field, Object: item, RowIndex: rowIndex, Content: colData.content, Click: function (data, e) { return props.Click(data, e); } });
        });
        var style = (props.RowStyle !== undefined) ? __assign({}, props.RowStyle) : {};
        if (style.cursor === undefined)
            style.cursor = 'pointer';
        if (props.Selected !== undefined && props.Selected(item))
            style.backgroundColor = 'yellow';
        function ToKey(index, data) {
            if (props.KeySelector === undefined)
                return index.toString();
            return props.KeySelector(data);
        }
        return (React.createElement("tr", { style: style, key: ToKey(rowIndex, item) }, cells));
    });
    return (React.createElement("tbody", { style: props.BodyStyle, className: props.BodyClass }, rows));
}
exports.Rows = Rows;
function Cell(props) {
    var css = (props.Style !== undefined) ? __assign({}, props.Style) : {};
    var getFieldValue = function () { return props.DataField !== undefined ? props.Object[props.DataField] : null; };
    var getFieldContent = function () { return props.Content !== undefined ? props.Content(props.Object, props.DataKey, props.DataField, css, props.RowIndex) : getFieldValue(); };
    return (React.createElement("td", { style: css, onClick: function (e) { return props.Click({ colKey: props.DataKey, colField: props.DataField, row: props.Object, data: getFieldValue(), index: props.RowIndex }, e); } }, getFieldContent()));
}
function Header(props) {
    return (React.createElement("thead", { className: props.Class, style: props.Style },
        React.createElement("tr", null, props.Cols.map(function (col) { return React.createElement(HeaderCell, { key: col.key, HeaderStyle: col.headerStyle, DataKey: col.key, Click: function (e) { return props.Click({ colKey: col.key, colField: col.field, ascending: props.Ascending }, e); }, Label: col.label, SortKey: props.SortKey, Ascending: props.Ascending }); }))));
}
exports.Header = Header;
function HeaderCell(props) {
    var style = (props.HeaderStyle !== undefined) ? props.HeaderStyle : {};
    if (style.cursor === undefined && props.DataKey !== null) {
        style.cursor = 'pointer';
    }
    if (style.position === undefined) {
        style.position = 'relative';
    }
    return (React.createElement("th", { style: style, onClick: function (e) { return props.Click(e); } },
        React.createElement(RenderAngleIcon, { SortKey: props.SortKey, Key: props.DataKey, Ascending: props.Ascending }),
        React.createElement("div", { style: { marginLeft: 10 } }, props.Label)));
}
function RenderAngleIcon(props) {
    var AngleIcon = function () { return (React.createElement("div", { style: { position: 'absolute', top: 10, transform: (props.Ascending ? 'rotate(0deg)' : 'rotate(180deg)') } }, '^')); };
    if (props.SortKey === null)
        return null;
    if (props.SortKey !== props.Key)
        return null;
    return React.createElement(AngleIcon, { ascending: props.Ascending });
}
;


/***/ }),

/***/ "./node_modules/@gpa-gemstone/react-table/lib/index.js":
/*!*************************************************************!*\
  !*** ./node_modules/@gpa-gemstone/react-table/lib/index.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

//  ******************************************************************************************************
//  index.tsx - Gbtc
//
//  Copyright © 2018, Grid Protection Alliance.  All Rights Reserved.
//
//  Licensed to the Grid Protection Alliance (GPA) under one or more contributor license agreements. See
//  the NOTICE file distributed with this work for additional information regarding copyright ownership.
//  The GPA licenses this file to you under the MIT License (MIT), the "License"; you may not use this
//  file except in compliance with the License. You may obtain a copy of the License at:
//
//      http://opensource.org/licenses/MIT
//
//  Unless agreed to in writing, the subject software distributed under the License is distributed on an
//  "AS-IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. Refer to the
//  License for the specific language governing permissions and limitations.
//
//  Code Modification History:
//  ----------------------------------------------------------------------------------------------------
//  08/02/2018 - Billy Ernest
//       Generated original version of source code.
//  02/12/2021 - C. lackner
//       Moved table to seperate File.
//
//  ******************************************************************************************************
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Rows = exports.DynamicTable = exports.SearchableTable = exports.SelectTable = void 0;
var Table_1 = __webpack_require__(/*! ./Table */ "./node_modules/@gpa-gemstone/react-table/lib/Table.js");
Object.defineProperty(exports, "Rows", ({ enumerable: true, get: function () { return Table_1.Rows; } }));
var SelectTable_1 = __webpack_require__(/*! ./SelectTable */ "./node_modules/@gpa-gemstone/react-table/lib/SelectTable.js");
Object.defineProperty(exports, "SelectTable", ({ enumerable: true, get: function () { return SelectTable_1.SelectTable; } }));
var SearchableTable_1 = __webpack_require__(/*! ./SearchableTable */ "./node_modules/@gpa-gemstone/react-table/lib/SearchableTable.js");
Object.defineProperty(exports, "SearchableTable", ({ enumerable: true, get: function () { return SearchableTable_1.SearchableTable; } }));
var DynamicTable_1 = __webpack_require__(/*! ./DynamicTable */ "./node_modules/@gpa-gemstone/react-table/lib/DynamicTable.js");
Object.defineProperty(exports, "DynamicTable", ({ enumerable: true, get: function () { return DynamicTable_1.DynamicTable; } }));
exports.default = Table_1.default;


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90cmVuZGFwLy4vbm9kZV9tb2R1bGVzL0BncGEtZ2Vtc3RvbmUvcmVhY3QtdGFibGUvbGliL0R5bmFtaWNUYWJsZS5qcyIsIndlYnBhY2s6Ly90cmVuZGFwLy4vbm9kZV9tb2R1bGVzL0BncGEtZ2Vtc3RvbmUvcmVhY3QtdGFibGUvbGliL1NlYXJjaGFibGVUYWJsZS5qcyIsIndlYnBhY2s6Ly90cmVuZGFwLy4vbm9kZV9tb2R1bGVzL0BncGEtZ2Vtc3RvbmUvcmVhY3QtdGFibGUvbGliL1NlbGVjdFRhYmxlLmpzIiwid2VicGFjazovL3RyZW5kYXAvLi9ub2RlX21vZHVsZXMvQGdwYS1nZW1zdG9uZS9yZWFjdC10YWJsZS9saWIvVGFibGUuanMiLCJ3ZWJwYWNrOi8vdHJlbmRhcC8uL25vZGVfbW9kdWxlcy9AZ3BhLWdlbXN0b25lL3JlYWN0LXRhYmxlL2xpYi9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUZBQWlGO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBNkMsQ0FBQyxjQUFjLEVBQUM7QUFDN0Qsb0JBQW9CO0FBQ3BCLFlBQVksbUJBQU8sQ0FBQyw0Q0FBTztBQUMzQixjQUFjLG1CQUFPLENBQUMsc0VBQVM7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxvQkFBb0I7QUFDdkQ7QUFDQSxtQkFBbUIsbUNBQW1DO0FBQ3REO0FBQ0EsMENBQTBDLDZGQUE2RjtBQUN2SSw2Q0FBNkMsMklBQTJJLHlCQUF5QixFQUFFLEVBQUU7QUFDck4sMkNBQTJDLDhJQUE4SSwrQkFBK0IsRUFBRSw0REFBNEQ7QUFDdFI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjs7Ozs7Ozs7Ozs7O0FDNUNQO0FBQ2I7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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQTZDLENBQUMsY0FBYyxFQUFDO0FBQzdELFlBQVksR0FBRyxvQkFBb0IsR0FBRyx1QkFBdUIsR0FBRyxtQkFBbUI7QUFDbkYsY0FBYyxtQkFBTyxDQUFDLHNFQUFTO0FBQy9CLHdDQUF1QyxDQUFDLHFDQUFxQyxxQkFBcUIsRUFBRSxFQUFFLEVBQUM7QUFDdkcsb0JBQW9CLG1CQUFPLENBQUMsa0ZBQWU7QUFDM0MsK0NBQThDLENBQUMscUNBQXFDLGtDQUFrQyxFQUFFLEVBQUUsRUFBQztBQUMzSCx3QkFBd0IsbUJBQU8sQ0FBQywwRkFBbUI7QUFDbkQsbURBQWtELENBQUMscUNBQXFDLDBDQUEwQyxFQUFFLEVBQUUsRUFBQztBQUN2SSxxQkFBcUIsbUJBQU8sQ0FBQyxvRkFBZ0I7QUFDN0MsZ0RBQStDLENBQUMscUNBQXFDLG9DQUFvQyxFQUFFLEVBQUUsRUFBQztBQUM5SCxlQUFlIiwiZmlsZSI6InZlbmRvcnMtbm9kZV9tb2R1bGVzX2dwYS1nZW1zdG9uZV9yZWFjdC10YWJsZV9saWJfaW5kZXhfanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcclxuLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbi8vICBEeW5hbWljVGFibGUudHN4IC0gR2J0Y1xyXG4vL1xyXG4vLyAgQ29weXJpZ2h0IMKpIDIwMjEsIEdyaWQgUHJvdGVjdGlvbiBBbGxpYW5jZS4gIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXHJcbi8vXHJcbi8vICBMaWNlbnNlZCB0byB0aGUgR3JpZCBQcm90ZWN0aW9uIEFsbGlhbmNlIChHUEEpIHVuZGVyIG9uZSBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gU2VlXHJcbi8vICB0aGUgTk9USUNFIGZpbGUgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24gcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuXHJcbi8vICBUaGUgR1BBIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byB5b3UgdW5kZXIgdGhlIE1JVCBMaWNlbnNlIChNSVQpLCB0aGUgXCJMaWNlbnNlXCI7IHlvdSBtYXkgbm90IHVzZSB0aGlzXHJcbi8vICBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdDpcclxuLy9cclxuLy8gICAgICBodHRwOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlUXHJcbi8vXHJcbi8vICBVbmxlc3MgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHRoZSBzdWJqZWN0IHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXHJcbi8vICBcIkFTLUlTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBSZWZlciB0byB0aGVcclxuLy8gIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zLlxyXG4vL1xyXG4vLyAgQ29kZSBNb2RpZmljYXRpb24gSGlzdG9yeTpcclxuLy8gIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuLy8gIDA3LzI2LzIwMjEgLSBCaWxseSBFcm5lc3RcclxuLy8gICAgICAgR2VuZXJhdGVkIG9yaWdpbmFsIHZlcnNpb24gb2Ygc291cmNlIGNvZGUuXHJcbi8vXHJcbi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuRHluYW1pY1RhYmxlID0gdm9pZCAwO1xyXG52YXIgUmVhY3QgPSByZXF1aXJlKFwicmVhY3RcIik7XHJcbnZhciBUYWJsZV8xID0gcmVxdWlyZShcIi4vVGFibGVcIik7XHJcbmZ1bmN0aW9uIER5bmFtaWNUYWJsZShwcm9wcykge1xyXG4gICAgaWYgKHByb3BzLmRhdGEubGVuZ3RoIDw9IDApXHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB2YXIgY29scyA9IFtdO1xyXG4gICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wcy5kYXRhWzBdKTtcclxuICAgIGZvciAodmFyIF9pID0gMCwga2V5c18xID0ga2V5czsgX2kgPCBrZXlzXzEubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgdmFyIGtleSA9IGtleXNfMVtfaV07XHJcbiAgICAgICAgY29scy5wdXNoKHsga2V5OiBrZXksIGxhYmVsOiBrZXksIGZpZWxkOiBrZXkgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJ0YWJsZVwiLCB7IGNsYXNzTmFtZTogcHJvcHMudGFibGVDbGFzcyAhPT0gdW5kZWZpbmVkID8gcHJvcHMudGFibGVDbGFzcyA6ICcnLCBzdHlsZTogcHJvcHMudGFibGVTdHlsZSB9LFxyXG4gICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoVGFibGVfMS5IZWFkZXIsIHsgQ2xhc3M6IHByb3BzLnRoZWFkQ2xhc3MsIFN0eWxlOiBwcm9wcy50aGVhZFN0eWxlLCBDb2xzOiBjb2xzLCBTb3J0S2V5OiBwcm9wcy5zb3J0S2V5LCBBc2NlbmRpbmc6IHByb3BzLmFzY2VuZGluZywgQ2xpY2s6IGZ1bmN0aW9uIChkLCBlKSB7IHJldHVybiBoYW5kbGVTb3J0KGQsIGUpOyB9IH0pLFxyXG4gICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoVGFibGVfMS5Sb3dzLCB7IERhdGE6IHByb3BzLmRhdGEsIENvbHM6IGNvbHMsIFJvd1N0eWxlOiBwcm9wcy5yb3dTdHlsZSwgQm9keVN0eWxlOiBwcm9wcy50Ym9keVN0eWxlLCBCb2R5Q2xhc3M6IHByb3BzLnRib2R5Q2xhc3MsIENsaWNrOiBmdW5jdGlvbiAoZGF0YSwgZSkgeyByZXR1cm4gcHJvcHMub25DbGljayhkYXRhLCBlKTsgfSwgU2VsZWN0ZWQ6IHByb3BzLnNlbGVjdGVkLCBLZXlTZWxlY3RvcjogcHJvcHMua2V5U2VsZWN0b3IgfSkpKTtcclxuICAgIGZ1bmN0aW9uIGhhbmRsZVNvcnQoZGF0YSwgZXZlbnQpIHtcclxuICAgICAgICBpZiAoZGF0YS5jb2xLZXkgIT09IG51bGwpXHJcbiAgICAgICAgICAgIHByb3BzLm9uU29ydChkYXRhKTtcclxuICAgIH1cclxufVxyXG5leHBvcnRzLkR5bmFtaWNUYWJsZSA9IER5bmFtaWNUYWJsZTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4vLyAgU2VhcmNoYWJsZVRhYmxlLnRzeCAtIEdidGNcclxuLy9cclxuLy8gIENvcHlyaWdodCDCqSAyMDIxLCBHcmlkIFByb3RlY3Rpb24gQWxsaWFuY2UuICBBbGwgUmlnaHRzIFJlc2VydmVkLlxyXG4vL1xyXG4vLyAgTGljZW5zZWQgdG8gdGhlIEdyaWQgUHJvdGVjdGlvbiBBbGxpYW5jZSAoR1BBKSB1bmRlciBvbmUgb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuIFNlZVxyXG4vLyAgdGhlIE5PVElDRSBmaWxlIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLlxyXG4vLyAgVGhlIEdQQSBsaWNlbnNlcyB0aGlzIGZpbGUgdG8geW91IHVuZGVyIHRoZSBNSVQgTGljZW5zZSAoTUlUKSwgdGhlIFwiTGljZW5zZVwiOyB5b3UgbWF5IG5vdCB1c2UgdGhpc1xyXG4vLyAgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQ6XHJcbi8vXHJcbi8vICAgICAgaHR0cDovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVFxyXG4vL1xyXG4vLyAgVW5sZXNzIGFncmVlZCB0byBpbiB3cml0aW5nLCB0aGUgc3ViamVjdCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxyXG4vLyAgXCJBUy1JU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gUmVmZXIgdG8gdGhlXHJcbi8vICBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucy5cclxuLy9cclxuLy8gIENvZGUgTW9kaWZpY2F0aW9uIEhpc3Rvcnk6XHJcbi8vICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbi8vICAwNy8xMi8yMDIxIC0gQy4gTGFja25lclxyXG4vLyAgICAgICBHZW5lcmF0ZWQgb3JpZ2luYWwgdmVyc2lvbiBvZiBzb3VyY2UgY29kZS5cclxuLy9cclxuLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbnZhciBfX2Fzc2lnbiA9ICh0aGlzICYmIHRoaXMuX19hc3NpZ24pIHx8IGZ1bmN0aW9uICgpIHtcclxuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbih0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSlcclxuICAgICAgICAgICAgICAgIHRbcF0gPSBzW3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLlNlYXJjaGFibGVUYWJsZSA9IHZvaWQgMDtcclxudmFyIFJlYWN0ID0gcmVxdWlyZShcInJlYWN0XCIpO1xyXG52YXIgVGFibGVfMSA9IHJlcXVpcmUoXCIuL1RhYmxlXCIpO1xyXG4vKipcclxuICogQSBUYWJsZSB3aXRoIGFuIGlucHV0IEZpZWxkIHRvIHNlYXJjaCBvbiB0b3BcclxuICovXHJcbmZ1bmN0aW9uIFNlYXJjaGFibGVUYWJsZShwcm9wcykge1xyXG4gICAgdmFyIF9hID0gUmVhY3QudXNlU3RhdGUocHJvcHMuZGF0YSksIGRhdGEgPSBfYVswXSwgc2V0RGF0YSA9IF9hWzFdO1xyXG4gICAgdmFyIF9iID0gUmVhY3QudXNlU3RhdGUoJycpLCBzZWFyY2hUZXh0QVMgPSBfYlswXSwgc2V0U2VhcmNoVGV4dEFTID0gX2JbMV07XHJcbiAgICBSZWFjdC51c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNldERhdGEocHJvcHMuZGF0YS5maWx0ZXIoZnVuY3Rpb24gKHMpIHsgcmV0dXJuIHByb3BzLm1hdGNoU2VhcmNoKHMsIHNlYXJjaFRleHRBUyk7IH0pKTtcclxuICAgIH0sIFtwcm9wcy5kYXRhLCBzZWFyY2hUZXh0QVNdKTtcclxuICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFJlYWN0LkZyYWdtZW50LCBudWxsLFxyXG4gICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLCB7IGNsYXNzTmFtZTogXCJmb3JtLWNvbnRyb2xcIiwgcGxhY2Vob2xkZXI6IFwiU2VhcmNoIGZpbHRlciBmb3Igc2VsZWN0IGJveCAuLi5cIiwgdmFsdWU6IHNlYXJjaFRleHRBUywgb25DaGFuZ2U6IGZ1bmN0aW9uIChlKSB7IHJldHVybiBzZXRTZWFyY2hUZXh0QVMoZS50YXJnZXQudmFsdWUpOyB9IH0pLFxyXG4gICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoVGFibGVfMS5kZWZhdWx0LCBfX2Fzc2lnbih7fSwgcHJvcHMsIHsgZGF0YTogZGF0YSB9KSkpO1xyXG59XHJcbmV4cG9ydHMuU2VhcmNoYWJsZVRhYmxlID0gU2VhcmNoYWJsZVRhYmxlO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbi8vICBTZWxlY3RUYWJsZS50c3ggLSBHYnRjXHJcbi8vXHJcbi8vICBDb3B5cmlnaHQgwqkgMjAyMSwgR3JpZCBQcm90ZWN0aW9uIEFsbGlhbmNlLiAgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cclxuLy9cclxuLy8gIExpY2Vuc2VkIHRvIHRoZSBHcmlkIFByb3RlY3Rpb24gQWxsaWFuY2UgKEdQQSkgdW5kZXIgb25lIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiBTZWVcclxuLy8gIHRoZSBOT1RJQ0UgZmlsZSBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC5cclxuLy8gIFRoZSBHUEEgbGljZW5zZXMgdGhpcyBmaWxlIHRvIHlvdSB1bmRlciB0aGUgTUlUIExpY2Vuc2UgKE1JVCksIHRoZSBcIkxpY2Vuc2VcIjsgeW91IG1heSBub3QgdXNlIHRoaXNcclxuLy8gIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0OlxyXG4vL1xyXG4vLyAgICAgIGh0dHA6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVRcclxuLy9cclxuLy8gIFVubGVzcyBhZ3JlZWQgdG8gaW4gd3JpdGluZywgdGhlIHN1YmplY3Qgc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cclxuLy8gIFwiQVMtSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFJlZmVyIHRvIHRoZVxyXG4vLyAgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMuXHJcbi8vXHJcbi8vICBDb2RlIE1vZGlmaWNhdGlvbiBIaXN0b3J5OlxyXG4vLyAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4vLyAgMDEvMjIvMjAyMSAtIEMuIExhY2tuZXJcclxuLy8gICAgICAgR2VuZXJhdGVkIG9yaWdpbmFsIHZlcnNpb24gb2Ygc291cmNlIGNvZGUuXHJcbi8vXHJcbi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG52YXIgX19hc3NpZ24gPSAodGhpcyAmJiB0aGlzLl9fYXNzaWduKSB8fCBmdW5jdGlvbiAoKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpXHJcbiAgICAgICAgICAgICAgICB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn07XHJcbnZhciBfX3NwcmVhZEFycmF5ID0gKHRoaXMgJiYgdGhpcy5fX3NwcmVhZEFycmF5KSB8fCBmdW5jdGlvbiAodG8sIGZyb20pIHtcclxuICAgIGZvciAodmFyIGkgPSAwLCBpbCA9IGZyb20ubGVuZ3RoLCBqID0gdG8ubGVuZ3RoOyBpIDwgaWw7IGkrKywgaisrKVxyXG4gICAgICAgIHRvW2pdID0gZnJvbVtpXTtcclxuICAgIHJldHVybiB0bztcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLlNlbGVjdFRhYmxlID0gdm9pZCAwO1xyXG52YXIgUmVhY3QgPSByZXF1aXJlKFwicmVhY3RcIik7XHJcbnZhciBfID0gcmVxdWlyZShcImxvZGFzaFwiKTtcclxudmFyIFRhYmxlXzEgPSByZXF1aXJlKFwiLi9UYWJsZVwiKTtcclxuZnVuY3Rpb24gU2VsZWN0VGFibGUocHJvcHMpIHtcclxuICAgIHZhciBkaWRNb3VudFJlZiA9IFJlYWN0LnVzZVJlZihmYWxzZSk7XHJcbiAgICB2YXIgX2EgPSBSZWFjdC51c2VTdGF0ZShwcm9wcy5kYXRhKSwgZGF0YSA9IF9hWzBdLCBzZXREYXRhID0gX2FbMV07XHJcbiAgICB2YXIgX2IgPSBSZWFjdC51c2VTdGF0ZShbXSksIHNlbGVjdGVkID0gX2JbMF0sIHNldFNlbGVjdGVkID0gX2JbMV07XHJcbiAgICB2YXIgX2MgPSBSZWFjdC51c2VTdGF0ZShwcm9wcy5zb3J0S2V5KSwgc29ydEtleSA9IF9jWzBdLCBzZXRTb3J0S2V5ID0gX2NbMV07XHJcbiAgICB2YXIgX2QgPSBSZWFjdC51c2VTdGF0ZShwcm9wcy5hc2NlbmRpbmcpLCBhc2NlbmRpbmcgPSBfZFswXSwgc2V0QXNjZW5kaW5nID0gX2RbMV07XHJcbiAgICBSZWFjdC51c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmIChkaWRNb3VudFJlZi5jdXJyZW50KVxyXG4gICAgICAgICAgICBzZWxlY3RBbGwoKTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIGRpZE1vdW50UmVmLmN1cnJlbnQgPSB0cnVlO1xyXG4gICAgfSwgW3Byb3BzLnNlbGVjdEFsbENvdW50ZXJdKTtcclxuICAgIFJlYWN0LnVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHByb3BzLmRhdGEubGVuZ3RoICE9PSBkYXRhLmxlbmd0aClcclxuICAgICAgICAgICAgc2V0RGF0YShwcm9wcy5kYXRhKTtcclxuICAgIH0sIFtwcm9wcy5kYXRhXSk7XHJcbiAgICBSZWFjdC51c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNldFNlbGVjdGVkKGZ1bmN0aW9uIChkKSB7IHJldHVybiBkLmZpbHRlcihmdW5jdGlvbiAoa2V5SXRlbSkgeyByZXR1cm4gZGF0YS5maW5kSW5kZXgoZnVuY3Rpb24gKGl0ZW0pIHsgcmV0dXJuIGl0ZW1bcHJvcHMuS2V5RmllbGRdID09PSBrZXlJdGVtOyB9KSA+IC0xOyB9KTsgfSk7XHJcbiAgICB9LCBbZGF0YV0pO1xyXG4gICAgUmVhY3QudXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgc29ydENvbHVtbiA9IHByb3BzLmNvbHMuZmlsdGVyKGZ1bmN0aW9uIChjb2wpIHsgcmV0dXJuIGNvbC5rZXkgPT09IHNvcnRLZXk7IH0pWzBdO1xyXG4gICAgICAgIGlmIChzb3J0Q29sdW1uID09PSB1bmRlZmluZWQgfHwgc29ydENvbHVtbi5maWVsZCA9PT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgdmFyIHNvcnRGaWVsZCA9IHNvcnRDb2x1bW4uZmllbGQ7XHJcbiAgICAgICAgc2V0RGF0YShmdW5jdGlvbiAobHN0KSB7IHJldHVybiAoXy5vcmRlckJ5KGxzdCwgW3NvcnRGaWVsZF0sIFsoYXNjZW5kaW5nID8gXCJhc2NcIiA6IFwiZGVzY1wiKV0pKTsgfSk7XHJcbiAgICB9LCBbYXNjZW5kaW5nLCBzb3J0S2V5XSk7XHJcbiAgICBSZWFjdC51c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHByb3BzLm9uU2VsZWN0aW9uKGRhdGEuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7IHJldHVybiBzZWxlY3RlZC5maW5kSW5kZXgoZnVuY3Rpb24gKGtleSkgeyByZXR1cm4ga2V5ID09PSBpdGVtW3Byb3BzLktleUZpZWxkXTsgfSkgPiAtMTsgfSkpO1xyXG4gICAgfSwgW3NlbGVjdGVkXSk7XHJcbiAgICBmdW5jdGlvbiBoYW5kbGVDbGljayhkLCBldmVudCkge1xyXG4gICAgICAgIHZhciBzSW5kZXggPSBzZWxlY3RlZC5maW5kSW5kZXgoZnVuY3Rpb24gKGl0ZW0pIHsgcmV0dXJuIGl0ZW0gPT09IGQucm93W3Byb3BzLktleUZpZWxkXTsgfSk7XHJcbiAgICAgICAgaWYgKHNJbmRleCA9PT0gLTEpXHJcbiAgICAgICAgICAgIHNldFNlbGVjdGVkKGZ1bmN0aW9uIChvZCkgeyByZXR1cm4gX19zcHJlYWRBcnJheShfX3NwcmVhZEFycmF5KFtdLCBvZCksIFtkLnJvd1twcm9wcy5LZXlGaWVsZF1dKTsgfSk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICBzZXRTZWxlY3RlZChmdW5jdGlvbiAob2QpIHsgcmV0dXJuIG9kLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgeyByZXR1cm4gaXRlbSAhPT0gZC5yb3dbcHJvcHMuS2V5RmllbGRdOyB9KTsgfSk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBzZWxlY3RBbGwoKSB7XHJcbiAgICAgICAgc2V0U2VsZWN0ZWQoZnVuY3Rpb24gKGQpIHsgaWYgKGQubGVuZ3RoID09PSBkYXRhLmxlbmd0aClcclxuICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgcmV0dXJuIGRhdGEubWFwKGZ1bmN0aW9uIChyb3cpIHsgcmV0dXJuIHJvd1twcm9wcy5LZXlGaWVsZF07IH0pOyB9KTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGhhbmRsZVNvcnQoZCkge1xyXG4gICAgICAgIGlmIChkLmNvbEtleSA9PT0gc29ydEtleSlcclxuICAgICAgICAgICAgc2V0QXNjZW5kaW5nKCFhc2NlbmRpbmcpO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgc2V0U29ydEtleShkLmNvbEtleSk7XHJcbiAgICB9XHJcbiAgICB2YXIgdGFibGVQcm9wcyA9IHtcclxuICAgICAgICBjb2xzOiBfX3NwcmVhZEFycmF5KFtcclxuICAgICAgICAgICAgeyBrZXk6ICdnZW1zdG9uZS1jaGVja2JveCcsIGZpZWxkOiBwcm9wcy5LZXlGaWVsZCwgbGFiZWw6ICcnLCBoZWFkZXJTdHlsZTogeyB3aWR0aDogJzRlbScgfSwgcm93U3R5bGU6IHsgd2lkdGg6ICc0ZW0nIH0sIGNvbnRlbnQ6IGZ1bmN0aW9uIChpdGVtLCBrZXksIGZpZWxkLCBzdHlsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHNlbGVjdGVkLmZpbmRJbmRleChmdW5jdGlvbiAoaSkgeyByZXR1cm4gaSA9PT0gaXRlbVtwcm9wcy5LZXlGaWVsZF07IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA+IC0xKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IHN0eWxlOiB7IG1hcmdpblRvcDogJzE2cHgnLCB0ZXh0QWxpZ246ICdjZW50ZXInIH0gfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJpXCIsIHsgY2xhc3NOYW1lOiBcImZhIGZhLWNoZWNrLXNxdWFyZS1vIGZhLTN4XCIgfSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgfSB9XHJcbiAgICAgICAgXSwgcHJvcHMuY29scyksXHJcbiAgICAgICAgZGF0YTogZGF0YSxcclxuICAgICAgICBvbkNsaWNrOiBoYW5kbGVDbGljayxcclxuICAgICAgICBzb3J0S2V5OiBzb3J0S2V5LFxyXG4gICAgICAgIGFzY2VuZGluZzogYXNjZW5kaW5nLFxyXG4gICAgICAgIG9uU29ydDogaGFuZGxlU29ydCxcclxuICAgICAgICB0YWJsZUNsYXNzOiBwcm9wcy50YWJsZUNsYXNzLFxyXG4gICAgICAgIHRhYmxlU3R5bGU6IHByb3BzLnRhYmxlU3R5bGUsXHJcbiAgICAgICAgdGhlYWRTdHlsZTogcHJvcHMudGhlYWRTdHlsZSxcclxuICAgICAgICB0aGVhZENsYXNzOiBwcm9wcy50aGVhZENsYXNzLFxyXG4gICAgICAgIHRib2R5U3R5bGU6IHByb3BzLnRib2R5U3R5bGUsXHJcbiAgICAgICAgdGJvZHlDbGFzczogcHJvcHMudGJvZHlDbGFzcyxcclxuICAgICAgICBzZWxlY3RlZDogZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGZhbHNlOyB9LFxyXG4gICAgICAgIHJvd1N0eWxlOiBwcm9wcy5yb3dTdHlsZVxyXG4gICAgfTtcclxuICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFRhYmxlXzEuZGVmYXVsdCwgX19hc3NpZ24oe30sIHRhYmxlUHJvcHMpKTtcclxufVxyXG5leHBvcnRzLlNlbGVjdFRhYmxlID0gU2VsZWN0VGFibGU7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG4vLyAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbi8vICBUYWJsZS50c3ggLSBHYnRjXHJcbi8vXHJcbi8vICBDb3B5cmlnaHQgwqkgMjAxOCwgR3JpZCBQcm90ZWN0aW9uIEFsbGlhbmNlLiAgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cclxuLy9cclxuLy8gIExpY2Vuc2VkIHRvIHRoZSBHcmlkIFByb3RlY3Rpb24gQWxsaWFuY2UgKEdQQSkgdW5kZXIgb25lIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiBTZWVcclxuLy8gIHRoZSBOT1RJQ0UgZmlsZSBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC5cclxuLy8gIFRoZSBHUEEgbGljZW5zZXMgdGhpcyBmaWxlIHRvIHlvdSB1bmRlciB0aGUgTUlUIExpY2Vuc2UgKE1JVCksIHRoZSBcIkxpY2Vuc2VcIjsgeW91IG1heSBub3QgdXNlIHRoaXNcclxuLy8gIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0OlxyXG4vL1xyXG4vLyAgICAgIGh0dHA6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVRcclxuLy9cclxuLy8gIFVubGVzcyBhZ3JlZWQgdG8gaW4gd3JpdGluZywgdGhlIHN1YmplY3Qgc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cclxuLy8gIFwiQVMtSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFJlZmVyIHRvIHRoZVxyXG4vLyAgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMuXHJcbi8vXHJcbi8vICBDb2RlIE1vZGlmaWNhdGlvbiBIaXN0b3J5OlxyXG4vLyAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4vLyAgMDgvMDIvMjAxOCAtIEJpbGx5IEVybmVzdFxyXG4vLyAgICAgICBHZW5lcmF0ZWQgb3JpZ2luYWwgdmVyc2lvbiBvZiBzb3VyY2UgY29kZS5cclxuLy9cclxuLy8gICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG52YXIgX19hc3NpZ24gPSAodGhpcyAmJiB0aGlzLl9fYXNzaWduKSB8fCBmdW5jdGlvbiAoKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpXHJcbiAgICAgICAgICAgICAgICB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5IZWFkZXIgPSBleHBvcnRzLlJvd3MgPSB2b2lkIDA7XHJcbnZhciBSZWFjdCA9IHJlcXVpcmUoXCJyZWFjdFwiKTtcclxuZnVuY3Rpb24gVGFibGUocHJvcHMpIHtcclxuICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChcInRhYmxlXCIsIHsgY2xhc3NOYW1lOiBwcm9wcy50YWJsZUNsYXNzICE9PSB1bmRlZmluZWQgPyBwcm9wcy50YWJsZUNsYXNzIDogJycsIHN0eWxlOiBwcm9wcy50YWJsZVN0eWxlIH0sXHJcbiAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChIZWFkZXIsIHsgQ2xhc3M6IHByb3BzLnRoZWFkQ2xhc3MsIFN0eWxlOiBwcm9wcy50aGVhZFN0eWxlLCBDb2xzOiBwcm9wcy5jb2xzLCBTb3J0S2V5OiBwcm9wcy5zb3J0S2V5LCBBc2NlbmRpbmc6IHByb3BzLmFzY2VuZGluZywgQ2xpY2s6IGZ1bmN0aW9uIChkLCBlKSB7IHJldHVybiBoYW5kbGVTb3J0KGQsIGUpOyB9IH0pLFxyXG4gICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUm93cywgeyBEYXRhOiBwcm9wcy5kYXRhLCBDb2xzOiBwcm9wcy5jb2xzLCBSb3dTdHlsZTogcHJvcHMucm93U3R5bGUsIEJvZHlTdHlsZTogcHJvcHMudGJvZHlTdHlsZSwgQm9keUNsYXNzOiBwcm9wcy50Ym9keUNsYXNzLCBDbGljazogZnVuY3Rpb24gKGRhdGEsIGUpIHsgcmV0dXJuIHByb3BzLm9uQ2xpY2soZGF0YSwgZSk7IH0sIFNlbGVjdGVkOiBwcm9wcy5zZWxlY3RlZCwgS2V5U2VsZWN0b3I6IHByb3BzLmtleVNlbGVjdG9yIH0pKSk7XHJcbiAgICBmdW5jdGlvbiBoYW5kbGVTb3J0KGRhdGEsIGV2ZW50KSB7XHJcbiAgICAgICAgaWYgKGRhdGEuY29sS2V5ICE9PSBudWxsKVxyXG4gICAgICAgICAgICBwcm9wcy5vblNvcnQoZGF0YSk7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5kZWZhdWx0ID0gVGFibGU7XHJcbmZ1bmN0aW9uIFJvd3MocHJvcHMpIHtcclxuICAgIGlmIChwcm9wcy5EYXRhLmxlbmd0aCA9PT0gMClcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIHZhciByb3dzID0gcHJvcHMuRGF0YS5tYXAoZnVuY3Rpb24gKGl0ZW0sIHJvd0luZGV4KSB7XHJcbiAgICAgICAgdmFyIGNlbGxzID0gcHJvcHMuQ29scy5tYXAoZnVuY3Rpb24gKGNvbERhdGEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ2VsbCwgeyBrZXk6IGNvbERhdGEua2V5LCBTdHlsZTogY29sRGF0YS5yb3dTdHlsZSwgRGF0YUtleTogY29sRGF0YS5rZXksIERhdGFGaWVsZDogY29sRGF0YS5maWVsZCwgT2JqZWN0OiBpdGVtLCBSb3dJbmRleDogcm93SW5kZXgsIENvbnRlbnQ6IGNvbERhdGEuY29udGVudCwgQ2xpY2s6IGZ1bmN0aW9uIChkYXRhLCBlKSB7IHJldHVybiBwcm9wcy5DbGljayhkYXRhLCBlKTsgfSB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB2YXIgc3R5bGUgPSAocHJvcHMuUm93U3R5bGUgIT09IHVuZGVmaW5lZCkgPyBfX2Fzc2lnbih7fSwgcHJvcHMuUm93U3R5bGUpIDoge307XHJcbiAgICAgICAgaWYgKHN0eWxlLmN1cnNvciA9PT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICBzdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XHJcbiAgICAgICAgaWYgKHByb3BzLlNlbGVjdGVkICE9PSB1bmRlZmluZWQgJiYgcHJvcHMuU2VsZWN0ZWQoaXRlbSkpXHJcbiAgICAgICAgICAgIHN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd5ZWxsb3cnO1xyXG4gICAgICAgIGZ1bmN0aW9uIFRvS2V5KGluZGV4LCBkYXRhKSB7XHJcbiAgICAgICAgICAgIGlmIChwcm9wcy5LZXlTZWxlY3RvciA9PT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGluZGV4LnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIHJldHVybiBwcm9wcy5LZXlTZWxlY3RvcihkYXRhKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KFwidHJcIiwgeyBzdHlsZTogc3R5bGUsIGtleTogVG9LZXkocm93SW5kZXgsIGl0ZW0pIH0sIGNlbGxzKSk7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChcInRib2R5XCIsIHsgc3R5bGU6IHByb3BzLkJvZHlTdHlsZSwgY2xhc3NOYW1lOiBwcm9wcy5Cb2R5Q2xhc3MgfSwgcm93cykpO1xyXG59XHJcbmV4cG9ydHMuUm93cyA9IFJvd3M7XHJcbmZ1bmN0aW9uIENlbGwocHJvcHMpIHtcclxuICAgIHZhciBjc3MgPSAocHJvcHMuU3R5bGUgIT09IHVuZGVmaW5lZCkgPyBfX2Fzc2lnbih7fSwgcHJvcHMuU3R5bGUpIDoge307XHJcbiAgICB2YXIgZ2V0RmllbGRWYWx1ZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHByb3BzLkRhdGFGaWVsZCAhPT0gdW5kZWZpbmVkID8gcHJvcHMuT2JqZWN0W3Byb3BzLkRhdGFGaWVsZF0gOiBudWxsOyB9O1xyXG4gICAgdmFyIGdldEZpZWxkQ29udGVudCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHByb3BzLkNvbnRlbnQgIT09IHVuZGVmaW5lZCA/IHByb3BzLkNvbnRlbnQocHJvcHMuT2JqZWN0LCBwcm9wcy5EYXRhS2V5LCBwcm9wcy5EYXRhRmllbGQsIGNzcywgcHJvcHMuUm93SW5kZXgpIDogZ2V0RmllbGRWYWx1ZSgpOyB9O1xyXG4gICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KFwidGRcIiwgeyBzdHlsZTogY3NzLCBvbkNsaWNrOiBmdW5jdGlvbiAoZSkgeyByZXR1cm4gcHJvcHMuQ2xpY2soeyBjb2xLZXk6IHByb3BzLkRhdGFLZXksIGNvbEZpZWxkOiBwcm9wcy5EYXRhRmllbGQsIHJvdzogcHJvcHMuT2JqZWN0LCBkYXRhOiBnZXRGaWVsZFZhbHVlKCksIGluZGV4OiBwcm9wcy5Sb3dJbmRleCB9LCBlKTsgfSB9LCBnZXRGaWVsZENvbnRlbnQoKSkpO1xyXG59XHJcbmZ1bmN0aW9uIEhlYWRlcihwcm9wcykge1xyXG4gICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KFwidGhlYWRcIiwgeyBjbGFzc05hbWU6IHByb3BzLkNsYXNzLCBzdHlsZTogcHJvcHMuU3R5bGUgfSxcclxuICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwidHJcIiwgbnVsbCwgcHJvcHMuQ29scy5tYXAoZnVuY3Rpb24gKGNvbCkgeyByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChIZWFkZXJDZWxsLCB7IGtleTogY29sLmtleSwgSGVhZGVyU3R5bGU6IGNvbC5oZWFkZXJTdHlsZSwgRGF0YUtleTogY29sLmtleSwgQ2xpY2s6IGZ1bmN0aW9uIChlKSB7IHJldHVybiBwcm9wcy5DbGljayh7IGNvbEtleTogY29sLmtleSwgY29sRmllbGQ6IGNvbC5maWVsZCwgYXNjZW5kaW5nOiBwcm9wcy5Bc2NlbmRpbmcgfSwgZSk7IH0sIExhYmVsOiBjb2wubGFiZWwsIFNvcnRLZXk6IHByb3BzLlNvcnRLZXksIEFzY2VuZGluZzogcHJvcHMuQXNjZW5kaW5nIH0pOyB9KSkpKTtcclxufVxyXG5leHBvcnRzLkhlYWRlciA9IEhlYWRlcjtcclxuZnVuY3Rpb24gSGVhZGVyQ2VsbChwcm9wcykge1xyXG4gICAgdmFyIHN0eWxlID0gKHByb3BzLkhlYWRlclN0eWxlICE9PSB1bmRlZmluZWQpID8gcHJvcHMuSGVhZGVyU3R5bGUgOiB7fTtcclxuICAgIGlmIChzdHlsZS5jdXJzb3IgPT09IHVuZGVmaW5lZCAmJiBwcm9wcy5EYXRhS2V5ICE9PSBudWxsKSB7XHJcbiAgICAgICAgc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xyXG4gICAgfVxyXG4gICAgaWYgKHN0eWxlLnBvc2l0aW9uID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBzdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJ0aFwiLCB7IHN0eWxlOiBzdHlsZSwgb25DbGljazogZnVuY3Rpb24gKGUpIHsgcmV0dXJuIHByb3BzLkNsaWNrKGUpOyB9IH0sXHJcbiAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChSZW5kZXJBbmdsZUljb24sIHsgU29ydEtleTogcHJvcHMuU29ydEtleSwgS2V5OiBwcm9wcy5EYXRhS2V5LCBBc2NlbmRpbmc6IHByb3BzLkFzY2VuZGluZyB9KSxcclxuICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgc3R5bGU6IHsgbWFyZ2luTGVmdDogMTAgfSB9LCBwcm9wcy5MYWJlbCkpKTtcclxufVxyXG5mdW5jdGlvbiBSZW5kZXJBbmdsZUljb24ocHJvcHMpIHtcclxuICAgIHZhciBBbmdsZUljb24gPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IHN0eWxlOiB7IHBvc2l0aW9uOiAnYWJzb2x1dGUnLCB0b3A6IDEwLCB0cmFuc2Zvcm06IChwcm9wcy5Bc2NlbmRpbmcgPyAncm90YXRlKDBkZWcpJyA6ICdyb3RhdGUoMTgwZGVnKScpIH0gfSwgJ14nKSk7IH07XHJcbiAgICBpZiAocHJvcHMuU29ydEtleSA9PT0gbnVsbClcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIGlmIChwcm9wcy5Tb3J0S2V5ICE9PSBwcm9wcy5LZXkpXHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChBbmdsZUljb24sIHsgYXNjZW5kaW5nOiBwcm9wcy5Bc2NlbmRpbmcgfSk7XHJcbn1cclxuO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuLy8gICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4vLyAgaW5kZXgudHN4IC0gR2J0Y1xyXG4vL1xyXG4vLyAgQ29weXJpZ2h0IMKpIDIwMTgsIEdyaWQgUHJvdGVjdGlvbiBBbGxpYW5jZS4gIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXHJcbi8vXHJcbi8vICBMaWNlbnNlZCB0byB0aGUgR3JpZCBQcm90ZWN0aW9uIEFsbGlhbmNlIChHUEEpIHVuZGVyIG9uZSBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gU2VlXHJcbi8vICB0aGUgTk9USUNFIGZpbGUgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24gcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuXHJcbi8vICBUaGUgR1BBIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byB5b3UgdW5kZXIgdGhlIE1JVCBMaWNlbnNlIChNSVQpLCB0aGUgXCJMaWNlbnNlXCI7IHlvdSBtYXkgbm90IHVzZSB0aGlzXHJcbi8vICBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdDpcclxuLy9cclxuLy8gICAgICBodHRwOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlUXHJcbi8vXHJcbi8vICBVbmxlc3MgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHRoZSBzdWJqZWN0IHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXHJcbi8vICBcIkFTLUlTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBSZWZlciB0byB0aGVcclxuLy8gIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zLlxyXG4vL1xyXG4vLyAgQ29kZSBNb2RpZmljYXRpb24gSGlzdG9yeTpcclxuLy8gIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuLy8gIDA4LzAyLzIwMTggLSBCaWxseSBFcm5lc3RcclxuLy8gICAgICAgR2VuZXJhdGVkIG9yaWdpbmFsIHZlcnNpb24gb2Ygc291cmNlIGNvZGUuXHJcbi8vICAwMi8xMi8yMDIxIC0gQy4gbGFja25lclxyXG4vLyAgICAgICBNb3ZlZCB0YWJsZSB0byBzZXBlcmF0ZSBGaWxlLlxyXG4vL1xyXG4vLyAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5Sb3dzID0gZXhwb3J0cy5EeW5hbWljVGFibGUgPSBleHBvcnRzLlNlYXJjaGFibGVUYWJsZSA9IGV4cG9ydHMuU2VsZWN0VGFibGUgPSB2b2lkIDA7XHJcbnZhciBUYWJsZV8xID0gcmVxdWlyZShcIi4vVGFibGVcIik7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIlJvd3NcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFRhYmxlXzEuUm93czsgfSB9KTtcclxudmFyIFNlbGVjdFRhYmxlXzEgPSByZXF1aXJlKFwiLi9TZWxlY3RUYWJsZVwiKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiU2VsZWN0VGFibGVcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFNlbGVjdFRhYmxlXzEuU2VsZWN0VGFibGU7IH0gfSk7XHJcbnZhciBTZWFyY2hhYmxlVGFibGVfMSA9IHJlcXVpcmUoXCIuL1NlYXJjaGFibGVUYWJsZVwiKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiU2VhcmNoYWJsZVRhYmxlXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBTZWFyY2hhYmxlVGFibGVfMS5TZWFyY2hhYmxlVGFibGU7IH0gfSk7XHJcbnZhciBEeW5hbWljVGFibGVfMSA9IHJlcXVpcmUoXCIuL0R5bmFtaWNUYWJsZVwiKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiRHluYW1pY1RhYmxlXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBEeW5hbWljVGFibGVfMS5EeW5hbWljVGFibGU7IH0gfSk7XHJcbmV4cG9ydHMuZGVmYXVsdCA9IFRhYmxlXzEuZGVmYXVsdDtcclxuIl0sInNvdXJjZVJvb3QiOiIifQ==